snapshots:
  - name: orders_snapshot
    relation: source('jaffle_shop', 'orders')
    config:
      schema: snapshots
      database: analytics
      unique_key: id
      strategy: check
      check_cols: ['id', 'user_id', 'order_date', 'status']
      # 如果这些列有变化，就新插一条版本
      hard_deletes: ignore
      # 如果源表里被物理删除 → snapshot 不动
      dbt_valid_to_current: "to_date('9999-12-31')"
      #对于 当前还有效（还没过期）的记录，dbt_valid_to 列的值就写成 9999-12-31。
